{ config, pkgs, lib, ... }:

pkgs.linuxPackagesFor (pkgs.linux_5_14_hardened.override {
  structuredExtraConfig = with lib.kernel; {

    ## General ##
    ACCESSIBILITY = lib.mkForce no;
    AIO = lib.mkForce no;
    BIG_KEYS = yes;
    BINFMT_MISC = yes; # NOTE
    BPF_SYSCALL = lib.mkForce no;
    BUG_ON_DATA_CORRUPTION = yes;
    COMPAT_BRK = no;
    COMPAT_VDSO = no;
    CONFIGFS_FS = yes;
    CONNECTOR = yes;
    COREDUMP = no;
    CRASH_DUMP = no;
    CRYPTO_CRYPTD = yes;
    CRYPTO_JITTERENTROPY = yes;
    DEBUG_VIRTUAL = yes;
    DEBUG_WX = yes;
    DEVMEM = no;
    DEVPORT = no;
    EFI_DISABLE_PCI_DMA = no;
    EFI_GENERIC_STUB_INITRD_CMDLINE_LOADER = no;
    EFI_VARS = no;
    ENCRYPTED_KEYS = yes;
    FORTIFY_SOURCE = yes;
    GCC_PLUGINS = yes;
    GCC_PLUGIN_LATENT_ENTROPY = yes;
    GCC_PLUGIN_RANDSTRUCT = yes;
    GCC_PLUGIN_STACKLEAK = yes;
    GCC_PLUGIN_STACKLEAK_METRICS = yes;
    GCC_PLUGIN_STRUCTLEAK_BYREF_ALL = yes;
    GPIOLIB = no;
    HARDENED_USERCOPY = yes;
    HARDENED_USERCOPY_FALLBACK = no;
    HARDENED_USERCOPY_PAGESPAN = no;
    HIBERNATION = no;
    INIT_ON_ALLOC_DEFAULT_ON = yes;
    INIT_ON_FREE_DEFAULT_ON = yes;
    KEXEC = no;
    KEXEC_FILE = lib.mkForce no;
    KEYS = yes;
    KEY_DH_OPERATIONS = yes;
    MAGIC_SYSRQ_DEFAULT_ENABLE = freeform "0x84";
    NLS_CODEPAGE_437 = lib.mkForce yes;
    NLS_ISO8859_1 = lib.mkForce yes;
    OVERLAY_FS = yes;
    PAGE_POISONING = no;
    PAGE_SANITIZE = yes;
    PAGE_SANITIZE_VERIFY = yes;
    PAGE_TABLE_ISOLATION = yes;
    PERSISTENT_KEYS = yes;
    PROC_KCORE = no;
    PROC_PAGE_MONITOR = no;
    PROFILING = no;
    PSTORE_COMPRESS_DEFAULT = freeform "zstd";
    PSTORE_DEFLATE_COMPRESS = yes;
    PSTORE_RAM = yes;
    PSTORE_ZSTD_COMPRESS = yes;
    RANDOMIZE_BASE = yes;
    RANDOMIZE_KSTACK_OFFSET_DEFAULT = yes;
    RANDOMIZE_MEMORY = yes;
    RANDOM_TRUST_BOOTLOADER = yes;
    RANDOM_TRUST_CPU = yes;
    RESET_ATTACK_MITIGATION = yes;
    SECURITY_DMESG_RESTRICT = yes;
    SECURITY_LOCKDOWN_LSM = no; # NOTE: depends on sigs
    SECURITY_NETWORK_XFRM = yes;
    SECURITY_PATH = yes;
    SECURITY_PERF_EVENTS_RESTRICT = yes;
    SECURITY_TIOCSTI_RESTIRCT = yes;
    SLAB_FREELIST_HARDENED = yes;
    SLAB_FREELIST_RANDOM = yes;
    SLAB_MERGE_DEFAULT = no;
    STACKPROTECTOR = yes;
    STACKPROTECTOR_STRONG = yes;
    STAGING = lib.mkForce no;
    SYSFS_SYSCALL = no;
    TLS = yes;
    TLS_DEVICE = yes;
    TRUSTED_KEYS = yes;
    UHID = no;
    UIO = no;
    USELIB = no;
    VMAP_STACK = yes;
    ZRAM = module;
    ZRAM_DEF_COMP = freeform "zstd";
    ZSMALLOC = module;
    ZSMALLOC_STAT = yes;

    ## X86_64 ##
    DEFAULT_MMAP_MIN_ADDR = freeform "65536";
    IA32_EMULATION = no;
    LEGACY_VSYSCALL_NONE = yes;
    MODIFY_LDT_SYSCALL = no;
    X86_64 = yes;
    X86_CPUID = yes;
    X86_IOPL_IOPERM = no;
    X86_MCE_INJECT = no;
    X86_MSR = yes;
    X86_X32 = no;

    ## Current HW ##
    ACPI_APEI = yes;
    ACPI_APEI_GHES = yes;
    ACPI_APEI_PCIEAER = yes;
    ACPI_BUTTON = yes;
    ACPI_FPDT = yes;
    ACPI_PROCESSOR_AGGREGATOR = yes;
    ACPI_TAD = yes;
    ACPI_WMI = yes;
    AMD_IOMMU = yes;
    AMD_IOMMU_V2 = yes;
    AMD_SFH_HID = yes;
    ATA = yes;
    CRYPTO_AES_NI_INTEL = yes;
    GIGABYTE_WMI = yes;
    HW_RANDOM = yes;
    HW_RANDOM_AMD = yes;
    HW_RANDOM_TPM = yes;
    LEDS_BRIGHTNESS_HW_CHANGED = yes;
    LEDS_CLASS = yes;
    LEDS_CLASS_FLASH = yes;
    LEDS_CLASS_MULTICOLOR = yes;
    PERF_EVENTS_AMD_POWER = yes;
    PERF_EVENTS_INTEL_CSTATE = yes;
    PERF_EVENTS_INTEL_RAPL = yes;
    PERF_EVENTS_INTEL_UNCORE = yes;
    SENSORS_CORETEMP = yes;
    SENSORS_K10TEMP = yes;
    TEE = yes;
    X86_5LEVEL = no;

    ## Media ##
    SND_HDA = yes;
    SND_HDA_CORE = yes;
    SND_JACK = yes;
    SND_OSSEMUL = yes;
    SOUND_OSS_CORE = yes;

    ## I/O ##
    BACKLIGHT_CLASS_DEVICE = yes;
    HID = yes;
    HID_ACCUTOUCH = yes;
    HID_APPLE = yes;
    HID_BELKIN = yes;
    HID_CHERRY = yes;
    HID_CHICONY = yes;
    HID_CORSAIR = yes;
    HID_CP2112 = yes;
    HID_FT260 = yes;
    HID_GENERIC = yes;
    HID_GLORIOUS = yes;
    HID_JABRA = yes;
    HID_KENSINGTON = yes;
    HID_LENOVO = yes;
    HID_LOGITECH = yes;
    HID_LOGITECH_DJ = yes;
    HID_LOGITECH_HIDPP = yes;
    HID_MAGICMOUSE = yes;
    HID_MAYFLASH = yes;
    HID_MICROSOFT = yes;
    HID_ORTEK = yes;
    HID_PLANTRONICS = yes;
    HID_SENSOR_CUSTOM_SENSOR = yes;
    HID_SENSOR_HUB = yes;
    HID_STEAM = yes;
    HID_STEELSERIES = yes;
    HID_WACOM = yes;
    I2C = yes;
    I2C_CHARDEV = yes;
    I2C_MUX = yes;
    MEDIA_CAMERA_SUPPORT = yes;
    MEDIA_USB_SUPPORT = yes;
    PCIEAER = yes;
    PCIE_PTM = yes;
    PCI_PF_STUB = yes;
    PCI_REALLOC_ENABLE_AUTO = yes;
    PCI_STUB = yes;
    TYPEC = yes;
    USB = yes;
    USB_HID = yes;
    USB_XHCI_HCD = yes;
    USB_XHCI_PCI = yes;
    USB_XHI_PCI_RENESAS = yes;
    USB_XHCI_PLATFORM = yes;
    USB_EHCI_HCD = yes;
    USB_EHCI_PCI = yes;
    USB_EHCI_FSL = yes;
    USB_OHCI_HCD = yes;
    USB_OHCI_PCI = yes;
    USB_OHCI_HCD_PLATFORM = yes;
    USB_UHCI_HCD = yes;

    ## Networking ##
    DEFAULT_TCP_CONG = freeform "bbr";
    INET6_AH = yes;
    INET6_ESP = yes;
    INET6_ESPINTCP = no;
    INET6_ESP_OFFLOAD = yes;
    INET6_IPCOMP = yes;
    INET6_XFRM_TUNNEL = yes;
    INET_AH = yes;
    INET_DIAG = yes; # NOTE
    INET_ESP = yes;
    INET_ESPINTCP = no;
    INET_ESP_OFFLOAD = yes;
    INET_IPCOMP = yes;
    INET_RAW_DIAG = yes;
    INET_UDP_DIAG = yes;
    IPV6_FOU = yes;
    IPV6_FOU_TUNNEL = lib.mkForce yes;
    IPV6_GRE = yes;
    IPV6_ILA = yes;
    IPV6_TUNNEL = yes;
    IPV6_VTI = yes;
    NETFILTER_NETLINK = yes;
    NETFILTER_NETLINK_ACCT = yes;
    NETFILTER_NETLINK_HOOK = no;
    NETFILTER_NETLINK_LOG = yes;
    NETFILTER_NETLINK_OSF = yes;
    NETFILTER_NETLINK_QUEUE = yes;
    NETLINK_DIAG = yes;
    NET_9P = module;
    NET_FOU = yes;
    NET_IPGRE = yes;
    NET_IPGRE_DEMUX = yes;
    NET_IPVTI = yes;
    NF_CONNTRACK = yes;
    PACKET = yes;
    PACKET_DIAG = yes;
    RFKILL = yes;
    SYN_COOKIES = yes;
    TCG_TPM = yes;
    TCP_CONG_BBR = yes;
    TCP_CONG_CUBIC = yes;
    UNIX_DIAG = yes;
    VLAN_8021Q = yes;
    XFRM_ESP = yes;
    XFRM_INTERFACE = no;
    XFRM_MIGRATE = no;
    XFRM_STATISTICS = yes;
    XFRM_SUB_POLICY = yes;
    XFRM_USER = yes;

    ## Storage ##
    AUTOFS_FS = yes;
    BLK_DEV_BSG = yes;
    BLK_DEV_DM = yes;
    BLK_DEV_LOOP = yes;
    BLK_DEV_NVME = yes;
    BLK_DEV_SD = yes;
    BLK_DEV_SR = yes;
    BTRFS_FS = yes;
    CACHEFILES = yes;
    CUSE = yes;
    DAX = yes;
    DM_BUFIO = yes;
    DM_CRYPT = yes;
    DM_FLAKEY = yes;
    DM_RAID = yes;
    DM_SNAPSHOT = yes;
    DM_VERITY = yes;
    ECRYPT_FS = yes;
    ECRYPT_FS_MESSAGING = yes;
    EXFAT_FS = yes;
    EXT2_FS = yes;
    EXT3_FS = yes;
    EXT4_FS = yes;
    FAT_FS = yes;
    FSCACHE = yes;
    FS_ENCRYPTION_ALGS = yes;
    FS_MBCACHE = yes;
    FUSE_FS = yes;
    ISO9660_FS = yes;
    JBD2 = yes;
    MMC = yes;
    MMC_BLOCK = yes;
    NETWORK_FILESYSTEMS = no;
    NVME_CORE = yes;
    QFMT_v2 = yes;
    SATA_AHCI = yes;
    SATA_AHCI_PLATFORM = yes;
    SCSI = yes;
    SCSI_CONSTANTS = yes;
    SCSI_LOGGING = yes;
    SCSI_SCAN_ASYNC = yes;
    SQUASHFS = yes;
    VFAT_FS = yes;
    XFS_FS = yes;

    ## Unused ##
    "6LOWPAN" = no;
    ACERHDF = no;
    ACER_WIRELESS = no;
    ACER_WMI = no;
    ACPI_AC = no;
    ACPI_BATTERY = no;
    ACPI_CMPC = no;
    ACPI_CPPC_LIB = no;
    ACPI_DOCK = no;
    ACPI_EC_DEBUGFS = no;
    ACPI_FAN = no;
    ACPI_IPMI = no;
    ACPI_NFIT = no;
    ACPI_NUMA = no;
    ACPI_SBS = no;
    ACPI_TABLE_UPGRADE = no;
    ACPI_TINY_POWER_BUTTON = no;
    ACPI_VIDEO = no;
    AD525X_DPOT = no;
    ADFS_FS = no;
    ADV_SWBUTTON = no;
    AFFS_FS = no;
    AF_KCM = no;
    AF_RXRPC = no;
    ALIENWARE_WMI = no;
    ALTERA_MSGDMA = no;
    AMD_PMC = no;
    ANDROID = no;
    APDS9802ALS = no;
    APPLE_GMUX = no;
    APPLE_PROPERTIES = no;
    ARCNET = no;
    ASUS_LAPTOP = no;
    ASUS_WIRELESS = no;
    ATALK = no;
    ATA_OVER_ETH = no;
    ATA_SFF = no;
    ATH11K_PCI = no;
    ATM = no;
    AUTOFS4_FS = no;
    B43 = no;
    B43LEGACY = no;
    B44 = no;
    BATMAN_ADV = no;
    BATTERY_DS2780 = no;
    BATTERY_DS2781 = no;
    BE2ISCSI = no;
    BEFS_FS = no;
    BFS_FS = no;
    BLK_DEV_3W_XXXX_RAID = no;
    BLK_DEV_CRYPTOLOOP = no;
    BLK_DEV_DRBD = no;
    BLK_DEV_NBD = no;
    BLK_DEV_PCIESSD_MTIP32XX = no;
    BLK_DEV_RAM = no;
    BLK_DEV_RBD = no;
    BLK_DEV_RSXX = no;
    BLK_DEV_SX8 = no;
    BRIDGE = no;
    BRIDGE_NETFILTER = no;
    CAN = no;
    MMC_CB710 = no;
    CB710_CORE = no;
    CDROM_PKTCDVD = no;
    CHROME_PLATFORMS = lib.mkForce no;
    CHR_DEV_SCH = no;
    CHR_DEV_SG = no;
    CHR_DEV_ST = no;
    CNIC = no;
    COMPAL_LAPTOP = no;
    CORSAIR_CPRO = no;
    CRAMFS = no;
    CRYPTO_AES_TI = no;
    CXL_BUS = no;
    CYPRESS_FIRMWARE = no;
    DCDBAS = no;
    DECNET = no;
    DELL_RBTN = no;
    DELL_RBU = no;
    DELL_SMBIOS = no;
    DELL_WMI = no;
    DELL_WMI_AIO = no;
    DELL_WMI_DESCRIPTOR = no;
    DELL_WMI_LED = no;
    DELL_WMI_SYSMAN = no;
    DLM = no;
    DMATEST = no;
    DNOTIFY = no;
    DNS_RESOLVER = no;
    DRM_AMDGPU = no;
    DRM_AMD_DC = no;
    DRM_GMA500 = lib.mkForce no;
    DRM_GUD = no;
    DRM_I810 = no;
    DRM_I830 = no;
    DRM_I915 = no;
    DRM_MGA = no;
    DRM_NOUVEAU = no;
    DRM_R128 = no;
    DRM_RADEON = no;
    DRM_SAVAGE = no;
    DRM_SIS = no;
    DRM_TDFX = no;
    DRM_VGEM = no;
    DRM_VIA = no;
    DUMMY = no;
    DUMMY_IRQ = no;
    DVB_CORE = no;
    EDAC = no;
    EEPROM_LEGACY = no;
    EFS_FS = no;
    EISA = no;
    ENCLOSURE_SERVICES = no;
    EQUALIZER = no;
    EROFS_FS = no;
    EXOFS_FS = no;
    F2FS_FS = lib.mkForce no;
    FB_BACKLIGHT = no;
    FDOMAIN_ISA = no;
    FDOMAIN_PCI = no;
    FIREWIRE = no;
    FIREWIRE_NOSY = no;
    FPGA = no;
    FUJITSU_LAPTOP = no;
    FUJITSU_TABLET = no;
    FUSION = lib.mkForce no;
    FW_ATTR_CLASS = no;
    GFS2_FS = no;
    GNSS = no;
    GPD_POCKET_FAN = no;
    GPIO_CDEV_V1 = no;
    GPIO_SYSFS = no;
    HFSPLUS_FS = no;
    HFS_FS = no;
    HID_A4TECH = no;
    HID_ACRUX = no;
    HID_ALPS = no;
    HID_APPLEIR = no;
    HID_ASUS = no;
    HID_AUREAL = no;
    HID_BETOP_FF = no;
    HID_BIGBEN_FF = no;
    HID_CMEDIA = no;
    HID_COUGAR = no;
    HID_CREATIVE_SB0540 = no;
    HID_CYPRESS = no;
    HID_DRAGONRISE = no;
    HID_ELAN = no;
    HID_ELECOM = no;
    HID_ELO = no;
    HID_EMS_FF = no;
    HID_EZKEY = no;
    HID_GEMBIRD = no;
    HID_GFRM = no;
    HID_GOOGLE_HAMMER = no;
    HID_GREENASIA = no;
    HID_GT683R = no;
    HID_GYRATION = no;
    HID_HOLTEK = no;
    HID_HYPERV_MOUSE = no;
    HID_ICADE = no;
    HID_ITE = no;
    HID_KEYTOUCH = no;
    HID_KYE = no;
    HID_LCPOWER = no;
    HID_LED = no;
    HID_MALTRON = no;
    HID_MCP2221 = no;
    HID_MONTEREY = no;
    HID_MULTITOUCH = no;
    HID_NTI = no;
    HID_NTRIG = no;
    HID_PANTHERLORD = no;
    HID_PENMOUNT = no;
    HID_PETALYNX = no;
    HID_PICOLCD = no;
    HID_PLAYSTATION = no;
    HID_PRIMAX = no;
    HID_REDRAGON = no;
    HID_RETRODE = no;
    HID_RMI4 = no;
    HID_ROCCAT = no;
    HID_SAITEK = no;
    HID_SAMSUNG = no;
    HID_SEMITEK = no;
    HID_SMARTJOYPLUS = no;
    HID_SONY = no;
    HID_SPEEDLINK = no;
    HID_SUNPLUS = no;
    HID_THINGM = no;
    HID_THRUSTMASTER = no;
    HID_TIVO = no;
    HID_TOPSEED = no;
    HID_TWINHAN = no;
    HID_U2FZERO = no;
    HID_UCLOGIC = no;
    HID_UDRAW_PS3 = no;
    HID_VIEWSONIC = no;
    HID_VIVALDI = no;
    HID_WALTOP = no;
    HID_WIIMOTE = no;
    HID_XINMO = no;
    HID_ZEROPLUS = no;
    HID_ZYDACRON = no;
    HOTPLUG_PCI = no;
    HOTPLUG_PCI_PCIE = lib.mkForce no;
    HPFS_FS = no;
    HP_ILO = no;
    HP_WMI = no;
    HSR = no;
    HW_RANDOM_INTEL = no;
    HYPERV = no;
    HYPERV_STORAGE = no;
    I2C_GPIO = no;
    I2C_HID_ACPI = no;
    I2C_HID_CORE = no;
    I2C_MULTI_INSTANTIATE = no;
    I2C_PIIX4 = no;
    I8K = no;
    IBM_ASM = no;
    IBM_RTL = no;
    ICS932S401 = no;
    IEEE802154 = no;
    IIO = no;
    INFINIBAND = no;
    INPUT_TOUCHSCREEN = no;
    INT340X_THERMAL = no;
    INTEL_ATOMISP2_LED = no;
    INTEL_ATOMISP2_PM = no;
    INTEL_HID_EVENT = no;
    INTEL_IDMA64 = no;
    INTEL_INT0002_VGPIO = no;
    INTEL_IOMMU_SVM = no;
    INTEL_IPS = no;
    INTEL_ISH_HID = no;
    INTEL_MENLOW = no;
    INTEL_OAKTRAIL = no;
    INTEL_RST = no;
    INTEL_SKL_INT3472 = no;
    INTEL_SMARTCONNECT = no;
    INTEL_TH = no;
    INTEL_TXT = no;
    INTEL_VBTN = no;
    INTEL_WMI_SBL_FW_UPDATE = no;
    INTEL_WMI_THUNDERBOLT = no;
    IPV6_MIP6 = no;
    IPV6_SIT = no;
    IP_DCCP = no;
    IP_MROUTE = no;
    IP_PIMSM_V1 = yes;
    IP_PIMSM_V2 = no;
    IP_SCTP = no;
    IP_VS = no;
    ISA_BUS = no;
    ISCSI_BOOT_SYSFS = no;
    ISCSI_IBFT = no;
    ISCSI_TCP = no;
    ISL29003 = no;
    ISL29020 = no;
    JFFS2_FS = no;
    JFS_FS = no;
    KUNIT = no;
    L2TP = no;
    LAPB = no;
    LCD_CLASS_DEVICE = no;
    LDISC_AUTOLOAD = no;
    LEGACY_PTYS = no;
    LG_LAPTOP = no;
    LIBFC = no;
    LIBFCOE = no;
    LLC2 = no;
    LOGIRUMBLEPAD2_FF = lib.mkForce no;
    LOGITECH_FF = no;
    LOGIWHEELS_FF = no;
    MACINTOSH_DRIVERS = no;
    MEDIA_ANALOG_TV_SUPPORT = lib.mkForce no;
    MEDIA_DIGITAL_TV_SUPPORT = lib.mkForce no;
    MEGARAID_NEWGEN = lib.mkForce no;
    MEMSTICK = no;
    MHI_BUS = no;
    MINIX_FS = no;
    MLX_PLATFORM = no;
    MPLS = no;
    MSDOS_FS = no;
    MSI_WMI = no;
    MTD = no;
    MXM_WMI = no;
    NETFS_SUPPORT = no;
    NET_DSA = no;
    NET_FC = lib.mkForce no;
    NET_IPIP = no;
    NET_L3_MASTER_DEV = lib.mkForce no;
    NET_NSH = no;
    NET_PKTGEN = no;
    NET_SCHED = lib.mkForce no;
    NET_SWITCHDEV = no;
    NFC = no;
    NILFS2_FS = no;
    NTB = no;
    NTFS_FS = no; # NOTE: Consider enabling in 5.15+
    NVME_FC = no;
    NVME_TARGET = no;
    NVME_TCP = no;
    OCFS2_FS = no;
    OMFS_FS = no;
    OPENVSWITCH = no;
    ORANGEFS_FS = no;
    PANASONIC_LAPTOP = no;
    PARPORT = no;
    PCCARD = no;
    PCIE_DPC = no;
    PCI_HYPERV = no;
    PCI_MESON = no;
    PCI_SW_SWITCHTEC = no;
    PCMCIA = no;
    PDC_ADMA = no;
    PEAQ_WMI = no;
    PHANTOM = no;
    PHONET = no;
    PNP = no;
    PROVIDE_OHCI1394_DMA_INIT = no;
    PSTORE_LZ4_COMPRESS = no;
    PSTORE_LZO_COMPRESS = no;
    QCOM_QMI_HELPERS = no;
    QED = no;
    QED_FCOE = no;
    QED_LL2 = no;
    QED_OOO = no;
    QFMT_V1 = no;
    QNX4FS_FS = no;
    QNX6FS_FS = no;
    QRTR = no;
    RAPIDIO = no;
    RC_CORE = no;
    RDS = no;
    REISERFS_FS = no;
    RFKLL_GPIO = no;
    ROMFS_FS = no;
    RPMSG = no;
    SAMSUNG_LAPTOP = no;
    SAMSUNG_Q10 = no;
    SATA_ACARD_AHCI = no;
    SATA_INIC162X = no;
    SATA_NV = no;
    SATA_SIL24 = no;
    SCSI_3W_9XXX = no;
    SCSI_3W_SAS = no;
    SCSI_AACRAID = no;
    SCSI_ACARD = no;
    SCSI_ADVANSYS = no;
    SCSI_AHA152X = no;
    SCSI_AHA1542 = no;
    SCSI_AHA1740 = no;
    SCSI_AIC79XX = no;
    SCSI_AIC7XXX = no;
    SCSI_AIC94XX = no;
    SCSI_AM53C974 = no;
    SCSI_ARCMSR = no;
    SCSI_BFA_FC = no;
    SCSI_BNX2X_FCOE = no;
    SCSI_BNX2_ISCSI = no;
    SCSI_BUSLOGIC = no;
    SCSI_CHELSIO_FCOE = no;
    SCSI_CXGB3_ISCSI = no;
    SCSI_CXGB4_ISCSI = no;
    SCSI_DC395x = no;
    SCSI_DEBUG = no;
    SCSI_DMA = no;
    SCSI_DMX3191D = no;
    SCSI_DPT_I20 = no;
    SCSI_ENCLOSURE = no;
    SCSI_ESAS2R = no;
    SCSI_ESP_PIO = no;
    SCSI_FC_ATTRS = no;
    SCSI_FLASHPOINT = no;
    SCSI_GENERIC_NCR5380 = no;
    SCSI_GXGB3_ISCSI = no;
    SCSI_HPSA = no;
    SCSI_HPTIOP = no;
    SCSI_INIA100 = no;
    SCSI_INITIO = no;
    SCSI_IPR = no;
    SCSI_IPS = no;
    SCSI_ISCI = no;
    SCSI_ISCSI_ATTRS = no;
    SCSI_LPFC = no;
    SCSI_MPI3MR = no;
    SCSI_MPT2SAS = no;
    SCSI_MPT3SAS = no;
    SCSI_MVSAS = no;
    SCSI_MVUMI = no;
    SCSI_MYRB = no;
    SCSI_MYRS = no;
    SCSI_NETLINK = no;
    SCSI_PM8001 = no;
    SCSI_PMCRAID = no;
    SCSI_PROC_FS = no;
    SCSI_QLA_ISCSI = no;
    SCSI_QLOGIC_1280 = no;
    SCSI_SAS_ATTRS = no;
    SCSI_SAS_LIBSAS = no;
    SCSI_SMARTPQI = no;
    SCSI_SNIC = no;
    SCSI_SPI_ATTRS = no;
    SCSI_SRP_ATTRS = no;
    SCSI_STEX = no;
    SCSI_SYM53C8XX_2 = no;
    SCSI_UFSHCD = no;
    SENSORS_BH1770 = no;
    SENSORS_HDAPS = no;
    SENSORS_LIS3LV02D = no;
    SENSORS_TSL2550 = no;
    SGIWD92_SCSI = no;
    SIOX = no;
    SLIMBUS = no;
    SND_BCD2000 = no;
    SND_SOC = no;
    SONY_LAPTOP = no;
    SOUNDWIRE = no;
    SPMI = no;
    SSB = no;
    STM = no;
    SURFACE_PLATFORMS = no;
    SYSTEM76_ACPI = no;
    SYSV_FS = no;
    TARGET_CORE = no;
    TCM_QLA2XXX = no;
    TCP_CONG_BIC = no;
    TCP_CONG_CDG = no;
    TCP_CONG_DCTCP = no;
    TCP_CONG_HSTCP = no;
    TCP_CONG_HTCP = no;
    TCP_CONG_HYBLA = no;
    TCP_CONG_ILLINOIS = no;
    TCP_CONG_NV = no;
    TCP_CONG_VEGAS = no;
    TCP_CONG_VENO = no;
    TCP_CONG_WESTWOOD = no;
    TCP_CONG_YEAH = no;
    TCP_MD5SIG = no;
    THINKPAD_LMI = no;
    THUNDERBOLT = no;
    TIFM_CORE = no;
    TINYDRM_HX8357D = no;
    TINYDRM_ILI9341 = no;
    TINYDRM_MI0283QT = no;
    TINYDRM_ST7735R = no;
    TIPC = no;
    TI_ST = no;
    TOPSTAR_LAPTOP = no;
    TOSHIBA_BT_RFKILL = no;
    TOSHIBA_HAPS = no;
    TOSHIBA_WMI = no;
    TTPCI_EEPROM = no;
    UBIFS_FS = no;
    UDF_FS = lib.mkForce no;
    UFS_FS = no;
    UNISYS_VISORBUS = no;
    VFIO = no;
    VIDEO_CX2341X = no;
    VIDEO_TVEEPROM = no;
    VIDEO_VIVID = no;
    VMD = no;
    VME_BUS = no;
    VMWARE_PVSCSI = no;
    VSOCKETS = no;
    VXFS_FS = no;
    W1 = no;
    WD719X = no;
    WIMAX = no;
    WIRELESS_HOTKEY = no;
    X86_PLATFORM_DRIVERS_DELL = lib.mkForce no;
    X86_PLATFORM_DRIVERS_INTEL = no;
    XEN = lib.mkForce no;
    XIAOMI_WMI = no;
    XILLYBUS = no;
    XILLYUSB = no;
    XPS = no;
    LIBNVDIMM = no;
    USB_C67X00_HCD = no;
    MMC_TIFM_SD = no;
    X86_PMEM_LEGACY = no;

    # NOTE: generate our own key for r13y
    #MODULE_SIG = no;
    #MODULE_SIG_FORCE = no;
    #MODULE_SIG_ALL = yes;
    #MODULE_SIG_SHA512 = yes;
    #MODULE_SIG_KEY = freeform "certs/signing_key.pem";
  };

  ignoreConfigErrors = true;
})
